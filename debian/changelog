bilibop (0.3.6) experimental; urgency=low

  * bilibop-common: modify common.sh for portability:
    - device_node_from_major_minor(): replace local path= by dev= (path is
      an environment variable of zsh, as PATH, but with spaces as separators
      instead of colons).
    - underlying_device_from_aufs(): escape equal sign (\=) in a variable
      subtitution (for compatibility with zsh again).
  * bilibop-common: modify common.sh to be sure DEBUG is 'true' or 'false'.
  * bilibop-common: modify physical_hard_disk(). Base the loop on /sys/block/*
    instead of the content of /proc/partitions. Runs a little bit faster.
  * bilibop-common: Add support for aufs module parameter 'brs=0'; add
    aufs_dirs_if_brs0() function, and modify aufs_readonly_branch(),
    aufs_writable_branch() and aufs_dirs() to use the new one.
  * bilibop-common: modify _drivemap_volume_size() to use 10 instead of 8 as a
    limit to display sizes in MB).
  * bilibop-common: add FSF address in the licence header of common.sh

  * bilibop-lockfs: use device_nodes() in blacklist_bilibop_devices().
  * bilibop-rules: fix typo in lsbilibop(8) french manual page.

  * Update documentation for bilibop-common (README.Debian, bugs.txt and
    lvm2.txt), bilibop-lockfs (README.Debian) and bilibop-rules
    (README.Debian).

  * debian/control: replace debhelper (>= 9.0.0) by debhelper (>= 9) in the
    Build-Depends: field. Add "GNU/Linux" in the short description of the
    bilibop metapackage.
  * debian/substvars: replace 'Debian' by 'Debian GNU/Linux'; add 'eSATA' in
    the list of external media.

 -- bilibop project <quidame@poivron.org>  Tue, 16 Oct 2012 15:58:14 +0200

bilibop (0.3.5) experimental; urgency=low

  * Fix typos in manpages and add french translations of the manpages.

  * bilibop-rules:
    Remove loopback udev rules file and modify bilibop rules file and
    bilibop_rules_generator to not depend on the BACKING_FILE variable.

  * bilibop-rules:
    Rewrite lsbilibop to allow to trigger uevents in a per-action and
    per-device basis: split -u option (update) to -a (action=add) and -c
    (action=change) options.
    Add a short help message in the case BILIBOP udev tag does not exist.
    Add the DEVLINKS udev property in the info (-i option) output.
    Relative paths, symlinks and wildcards are now supported in the
    commandline.

  * bilibop-rules:
    Modify lsbilibop manpage to be consistent with the new lsbilibop script.

  * bilibop-lockfs:
    Be less restrictive in blacklist_bilibop_devices() when building the
    'reject' patterns for lvm.conf filter array: only apply on bilibop
    Physical Volumes and their symlinks instead of all bilibop block
    devices and parent directories of their symlinks.
    Modify and rename overwrite_lvm_conf() to initialize_lvm_conf().
    Add BILIBOP_PART variable in the initramfs script.

  * bilibop-common:
    Fix drivemap output errors: remove annoying trailing spaces, fix width
    issues that occured with the -p option.
    Define the PROG variable and replace all occurencies of ${0##*/} by ${PROG}
    Fix a missing redirection to stderr when --debug is invoked.

  * bilibop-common:
    add device_nodes() function, which is used now in physical_hard_disk() and
    in lsbilibop script. Fix indentations (expand tabs) in common.sh.

  * bilibop-common:
    Add Copyright and Licence as header of lib/bilibop/common.sh, which can be
    used standalone.

  * debian/control: fix typo in bilibop-common description.
  * Remove unneeded executable bit of maintainer scripts and file intended to
    be installed in /bin and /usr/bin.
  * Add debian/source.lintian-overrides to override lintian warning message
    W: bilibop source: newer-standards-version 3.9.4 (current is 3.9.3)

 -- bilibop project <quidame@poivron.org>  Tue, 09 Oct 2012 00:06:50 +0200

bilibop (0.3.4) experimental; urgency=low

  * debian/control: bump Standards-Version to 3.9.4; add dependency on
    initscripts (>= 2.88dfs-13.3) for bilibop-common. Replace versioned
    dependencies on udev and initramfs-tools by unversioned dependencies;
    remove versioned dependency on base-files. Replace Vcs-Browser: field
    by Vcs-Git: field.
  * lib/bilibop/common.sh: add a test in physical_hard_disk() to avoid
    possible failures with some partition schemes. Allow
    parent_device_from_dm() to accept a device basename or its absolute path
    as argument.
  * lib/bilibop/lockfs.sh: allow is_encrypted() to treat devices called by
    their UUID or LABEL as well as their filename.

 -- bilibop project <quidame@poivron.org>  Sun, 23 Sep 2012 22:58:27 +0200

bilibop (0.3.3) unstable; urgency=low

  * debian/control: add Vcs-Browser: field.

 -- bilibop project <quidame@poivron.org>  Tue, 03 Jul 2012 02:59:38 +0200

bilibop (0.3.2) unstable; urgency=low

  * debian/control: fix indentation errors in bilibop-lockfs description.
  * bilibop-rules:
    - postinst: fix an error in the 'udev trigger --sysname-match' argument.
    - postrm: trigger uevents for block devices owned by the 'disk' group.
    - prerm: remove custom 66-bilibop.rules when package is purged.

 -- bilibop project <quidame@poivron.org>  Thu, 21 Jun 2012 00:16:26 +0200

bilibop (0.3.1) unstable; urgency=low

  * debian/control: in the Suggests: field of bilibop-rules, replace the too
    specific 'grub2' by a list of alternatives (grub-coreboot, grub-efi-amd64,
    grub-efi-ia32, grub-ieee1275 and grub-pc).

  * Add a TODO in bilibop-common, bilibop-rules and bilibop-lockfs.
  * Include /etc/bilibop/bilibop.conf in the bilibop-common binary package.
  * Modify scripts and documentation to take into account that there can be
    more than height loopback devices.

  * bilibop-rules:
    - Fix errors on tests in the initramfs script.
    - Modify grub_device_map_manager to exit with code 0.
  * bilibop-rules.postinst: trigger uevents for block devices.
  * bilibop-rules.bilibop.udev and bilibop_rules_generator: import ID_FS_*
    properties of dm devices in udev database even if udisks is not installed.
  * bilibop_rules_generator: include a new rule for the case the generated
    custom rules file is orphaned.

 -- bilibop project <quidame@poivron.org>  Wed, 20 Jun 2012 01:47:55 +0200

bilibop (0.3.0) unstable; urgency=low

  * debian/control:
    - Update Build-depends from debhelper (>= 8.0.0) to debhelper (>= 9.0.0).
    - Change some dependencies of binary packages to versioned dependencies:
      udev (>= 167), initramfs-tools (>= 0.99). As for base-files (>= 6.4),
      this is needed by the use of the /run temporary directory in bilibop
      functions or scripts.

  * bilibop-lockfs: modify the initramfs hook: busybox providing its own
    blockdev builtin, don't add /sbin/blockdev in the initramfs if busybox is
    added.
  * extended_partition(): rewrite to avoid direct access on devices (now
    based on udev instead of blkid), move it from lockfs.sh to common.sh
  * lockdev_rootdev_tree():
    - Rewrite it to avoid direct access on devices.
    - Rename it blockdev_root_subtree().
  * lockfs_mount_helper:
    - When the fstype registered in /etc/fstab is 'crypt', 'crypt_LUKS' or
      'crypto_LUKS', set the mounted mapped device as readonly too (and not
      only the underlying device) if asked by BILIBOP_LOCKFS_POLICY != soft.
    - Use LC_ALL=C before the verbose chmod and chown to not depend on the
      locale and simplify the regexp in sed.
  * Put the loop used in the initramfs script to parse and modify fstab in the
    parse_and_modify_fstab() function in lockfs.sh, and call this function in
    the initramfs script.
  * Because LVM tools can bypass 'readonly' settings of block devices and
    reset them as writable, add new functions in lockfs.sh:
    - blacklist_bilibop_devices(): called from the initramfs script.
    - overwrite_lvm_conf(): called from the previous one.
    They are used to disallow management of bilibop (physical and virtual)
    devices by the lvm commands by filtering them in the temporary lvm.conf.
    This avoids breakage of bilibop-lockfs 'hard' policy, at least for the
    root filesystem and its parent devices.
  * Add a new part (3.1.g) in README.Debian to explain what is done, and why.

  * bilibop-common: add a reference to
    http://wiki.debian.org/AdvancedStartupShutdownWithMultilayeredBlockDevices
    in the documentation.
  * Add misc/bugs.txt and misc/lvm2.txt in the documentation.
  * common.sh: remove unneeded command substitution (echo) in the
    undelying_device_from_loop() function.
  * New available options in usr/bin/drivemap:
    - Split --debug to --debug and -x or --set-x
    - Add -p or --mountpoint to explicitly ask to display mountpoints.
    - Add -w or --width to control the width of the output.
  * drivemap.sh: modify _dotline() and _print_line() to include new options.
  * drivemap.1: add the new options in the manpage.
  * _drivemap_primary_partitions(): rewrite to use extended_partition().

  * Fix some typos, unclear sentences and language errors in debian/control,
    in the documentation and in the comments of scripts and functions.

 -- bilibop project <quidame@poivron.org>  Sat, 16 Jun 2012 01:53:41 +0200

bilibop (0.2) unstable; urgency=low

  * New OpenPGP key.
  * debian/control: change 'Achitecture: all' to 'Architecture: linux-any' for
    all binaries.
  * debian/control: more precise description of the packages, their purposes
    and features. Add a statement about the required kernel version.
  * debian/copyright: modify Format field to:
    http://www.debian.org/doc/packaging-manuals/copyright-format/1.0/ (Fixes
    lintian pedantic message).
  * debian/copyright: change copyright date from 2012 to 2011-2012 for all
    files except debian/*.
  * Clean debian/rules.
  * Add debian/substvars.
  * bilibop-common: modify functions relative to loop devices and aufs to
    improve compatibility with LiveUSB systems.
  * bilibop-lockfs: set the primary extended partition as readonly when the
    root filesystem is contained into a logical partition that has been set
    readonly.
  * bilibop-rules: rewrite initramfs-tools script to not depend on
    bilibop-common functions.
  * Rewrite unclear or ambiguous parts of the documentation, and fix typos.
  * Remove unneeded files from the source.

 -- bilibop project <quidame@poivron.org>  Fri, 08 Jun 2012 01:48:59 +0200

bilibop (0.1) unstable; urgency=low

  * Initial Release (Closes: #675467).

 -- bilibop project <quidame@poivron.org>  Fri, 01 Jun 2012 00:06:51 +0200
